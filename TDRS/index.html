<!doctype html>
<html>
    <head>

        <meta charSet="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link href="assets/style.css" rel="stylesheet" type="text/css" />
    </head>
    <style type="text/css">
         @font-face {
                font-family: AvenirSubset;
                src: url('/spa-assets/fonts/avenir-optimized-subset.woff2') format('woff2'), url('/spa-assets/fonts/avenir-optimized-subset.woff') format('woff');
                unicode-range: U+24,U+2C,U+30-39,U+41-5A,U+61-7A;
                font-display: swap;
            }

            @font-face {
                font-family: "Avenir Next";
                src: url("/spa-assets/fonts/avenir-regular.woff2") format("woff2"), url("/spa-assets/fonts/avenir-regular.woff") format("woff");
                font-display: swap;
            }

            @font-face {
                font-family: "Avenir Next";
                src: url("/spa-assets/fonts/avenir-medium.woff2") format("woff2"), url("/spa-assets/fonts/avenir-medium.woff") format("woff");
                font-weight: 500;
                font-display: swap;
            }

            @font-face {
                font-family: "Avenir Next";
                src: url("/spa-assets/fonts/avenir-demibold.woff2") format("woff2"), url("/spa-assets/fonts/avenir-demibold.woff") format("woff");
                font-weight: 600;
                font-display: swap;
            }

            @font-face {
                font-family: "Avenir Next";
                src: url("/spa-assets/fonts/avenir-bold.woff2") format("woff2"), url("/spa-assets/fonts/avenir-bold.woff") format("woff");
                font-weight: bold;
                font-display: swap;
            }

            body {
                font-family: sans-serif;
            }

            .fonts-loaded-1 body {
                font-family: AvenirSubset;
            }

            .fonts-loaded-2 body {
                font-family: "Avenir Next", sans-serif;
            }
        .hide{
            display: none;
        }
        body {
            font-family: sans-serif;
        }
        #cal_mortage_big{
            transition: ease-out;
        }
        ._2cnGs{
            color: #1a2258;
        }
        #btn_cal{
            border: none;
            background-color: #1a2258;
            color: white;
            padding: 8px 24px;
            border-radius: 4px;
            font-weight: 900;
        }
        #btn_cal:hover{
            cursor: pointer;
        }


    </style>
    <body>
        <aside id="gallery-ad-modal" aria-label="gallery ad modal"></aside>
        <div id="fb-root"></div>
        <div class="ReactModalPortal"></div>
        <div id="content">
            <div
                data-tracking="{&quot;isMobile&quot;:false,&quot;page&quot;:&quot;MsrCalculator&quot;}">
                <div id="g_id_onload" data-prompt_parent_id="g_id_onload"
                    data-client_id="869688580448-cnk8qkf9aubkjru74bvpo6p8npr4dbir.apps.googleusercontent.com"
                    style="position:absolute;right:400px;top:54px;width:0;height:0;z-index:1001"></div>

                <div id="appContent" class="undefined">
                    <div class="tracking-root">
                        <main>
                            <h1 class="Z0npN _28xa3" style="font-size: 30px;">TDSR Calculator Singapore</h1>
                            <section class="_2dkYY">
                                <div class="X3gwL">
                                    <div class="_2cnD5">
                                        <form action="#">
                                            <div class="HusVm">
                                                <p>Application status</p>
                                                <div role="group"
                                                    aria-labelledby="application-status"
                                                    class="_2UN1r">
                                                    <p>
                                                        <input type="radio"
                                                            name="application_status"
                                                            value="single"
                                                            checked id="single" />
                                                        <span class="E0ZzV"></span>
                                                        <label for="single"
                                                            class="_3f2OE">Single</label>
                                                    </p>
                                                    <p>
                                                        <input type="radio"
                                                            name="application_status"
                                                            value="joint"
                                                            id="joint" />
                                                        <span class="E0ZzV"></span>
                                                        <label for="joint"
                                                            class="_3f2OE">Joint</label>
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="pLVoc">
                                                <label
                                                    for="fixed_monthly_income">
                                                    <span>Fixed income</span>
                                                </label>
                                                <div class="fixed_container">
                                                    <div class="PXjss">
                                                        <span class="_2If0y">$</span>
                                                        <span class="_1v7JR hide">Main applicant</span>
                                                        <input type="number"
                                                            id="fixed_monthly_income"
                                                            name="fixed_monthly_income[0]"
                                                            oninput="removeZero(this)"
                                                         value="0" />
                                                    </div>
                                                    <div class="PXjss hide optional">
                                                        <span class="_2If0y">$</span>
                                                        <span class="_1v7JR hide">Joint applicant</span>
                                                        <input type="number"
                                                        oninput="removeZero(this)"
                                                            id="fixed_monthly_income_joint"
                                                            name="fixed_monthly_income[0]"
                                                             value="0" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="pLVoc">
                                                <label
                                                    for="letiable_monthly_income">
                                                    <span>Variable income</span>
                                                    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" data-for="info" data-tip="true" class="_33r4C"> -->
                                                    <g fill-rule="evenodd">
                                                        <path
                                                            d="M8 14.406c3.509 0 6.406-2.897 6.406-6.407 0-3.515-2.904-6.412-6.413-6.412-3.51 0-6.406 2.897-6.406 6.412 0 3.51 2.897 6.407 6.412 6.407zm0-1.374c-2.794 0-5.033-2.246-5.033-5.033 0-2.793 2.233-5.039 5.026-5.039 2.793 0 5.032 2.246 5.039 5.04.006 2.786-2.246 5.032-5.033 5.032zm-.033-7.07c.482 0 .86-.391.86-.86 0-.488-.378-.872-.86-.872-.469 0-.86.384-.86.872 0 .469.391.86.86.86zm-1.061 5.364c-.293 0-.515-.208-.515-.501 0-.28.222-.495.515-.495h.716V7.882h-.606c-.293 0-.514-.208-.514-.501 0-.28.221-.495.514-.495h1.179c.364 0 .56.248.56.638v2.806h.644c.287 0 .514.215.514.495 0 .293-.227.501-.514.501H6.906z"
                                                            fill="currentColor"></path>
                                                    </g>
                                                    </svg>
                                                </label>
                                                <div>
                                                    <div class="PXjss">
                                                        <span class="_2If0y">$</span>
                                                        <span class="_1v7JR hide">Main applicant</span>
                                                        <input type="number"
                                                        oninput="removeZero(this)"
                                                            id="letiable_monthly_income"
                                                            name="letiable_monthly_income[0]"
                                                             value="0" />
                                                    </div>
                                                    <div class="PXjss hide optional">
                                                        <span class="_2If0y">$</span>
                                                        <span class="_1v7JR hide">Joint applicant</span>
                                                        <input type="number"
                                                        oninput="removeZero(this)"
                                                            id="letiable_monthly_income_joint"
                                                            name="letiable_monthly_income[0]"
                                                             value="0" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="pLVoc">
                                                <label
                                                    for="letiable_monthly_income">
                                                    <span>Monthly loans & debts</span>
                                                    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 16 16" data-for="info" data-tip="true" class="_33r4C"> -->
                                                    <g fill-rule="evenodd">
                                                        <path
                                                            d="M8 14.406c3.509 0 6.406-2.897 6.406-6.407 0-3.515-2.904-6.412-6.413-6.412-3.51 0-6.406 2.897-6.406 6.412 0 3.51 2.897 6.407 6.412 6.407zm0-1.374c-2.794 0-5.033-2.246-5.033-5.033 0-2.793 2.233-5.039 5.026-5.039 2.793 0 5.032 2.246 5.039 5.04.006 2.786-2.246 5.032-5.033 5.032zm-.033-7.07c.482 0 .86-.391.86-.86 0-.488-.378-.872-.86-.872-.469 0-.86.384-.86.872 0 .469.391.86.86.86zm-1.061 5.364c-.293 0-.515-.208-.515-.501 0-.28.222-.495.515-.495h.716V7.882h-.606c-.293 0-.514-.208-.514-.501 0-.28.221-.495.514-.495h1.179c.364 0 .56.248.56.638v2.806h.644c.287 0 .514.215.514.495 0 .293-.227.501-.514.501H6.906z"
                                                            fill="currentColor"></path>
                                                    </g>
                                                    </svg>
                                                </label>
                                                <div>
                                                    <div class="PXjss">
                                                        <span class="_2If0y">$</span>
                                                        <span class="_1v7JR hide">Main applicant</span>
                                                        <input type="number"
                                                        oninput="removeZero(this)"
                                                            id="debts"
                                                            name="debts[0]"
                                                             value="0" />
                                                    </div>
                                                    <div class="PXjss hide optional">
                                                        <span class="_2If0y">$</span>
                                                        <span class="_1v7JR hide">Joint applicant</span>
                                                        <input type="number"
                                                        oninput="removeZero(this)"
                                                            id="debts_joint"
                                                            name="debts[0]"
                                                             value="0" />
                                                    </div>
                                                </div>
                                            </div>
                                    </form>
                                    <div style=" margin-top:30px; text-align: center;">
                                        <button id="btn_cal" >Calculate</button>
                                    </div>
                                </div>
                                <div class="_2cnGs">
                                    <div class="_2FndZ">
                                        <h4 class="yMCxv _1vzK2">55% TDSR limit</h4>
                                        <p class="_2sIc2 _2rhE-">
                                            <span id="income_total" >$0</span>
                                        </p>
                                    </div>
                                    <div class="_2FndZ">
                                        <h4 class="yMCxv _1vzK2">Total debt obligations</h4>
                                        <p class="_2sIc2 _2rhE-" id="cal_mortage">$0</p>
                                    </div>
                                    <div class="_2MIAs">
                                        <h4 class="yMCxv _1vzK2">Monthly
                                            mortgage limit:</h4>
                                        <p class="_2sIc2 _2rhE-">
                                            <span id="cal_mortage_big">$0</span>
                                        </p>
                                    </div>
                                    <div class="Lp0qE">
                                        <div class="_1N-vy">
                                            
                                        </a>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </section>
                    
                    </main>
                </div>
            </div>
        </div>
    </div>

                    <script>
                    document.getElementById("joint").addEventListener("change", ()=>{
                        const arr = document.querySelectorAll(".optional");
                        const arr1 = document.querySelectorAll("._1v7JR");
                         
                        arr.forEach(elem=>{
                            elem.classList.remove("hide");
                        })
                        arr1.forEach(elem=>{
                            elem.classList.remove("hide");
                            elem.nextElementSibling.classList.add("_1TgFe")
                        })
                        calculateMortgage();
                      })
                      document.getElementById("single").addEventListener("change", ()=>{
                        const arr = document.querySelectorAll(".optional");
                        const arr1 = document.querySelectorAll("._1v7JR");
                         
                        arr.forEach(elem=>{
                            elem.classList.add("hide");
                        })
                        arr1.forEach(elem=>{
                            elem.classList.add("hide");
                            elem.nextElementSibling.classList.remove("_1TgFe")

                        })
                        calculateMortgage();
                      })

                      function calculateMortgage() {
                        let fixedincome = 0;
                        let Variableincome = 0;
                        fixedincome = parseInt(document.getElementById("fixed_monthly_income").value == ""?0:document.getElementById("fixed_monthly_income").value);
                        Variableincome = parseInt(document.getElementById("letiable_monthly_income").value == ""?0:document.getElementById("letiable_monthly_income").value);
                        if(document.getElementById("joint").checked){
                            fixedincome += parseInt(document.getElementById("fixed_monthly_income_joint").value == ""?0:document.getElementById("fixed_monthly_income_joint").value);
                            Variableincome += parseInt(document.getElementById("letiable_monthly_income_joint").value == ""?0:document.getElementById("letiable_monthly_income_joint").value);
                        }
                        const debt = parseInt(document.getElementById("debts_joint").value == ""?0:document.getElementById("debts_joint").value) + parseInt(document.getElementById("debts").value == ""?0:document.getElementById("debts").value);


                        const res = (fixedincome + (Variableincome * 0.7)) * 0.55;
                        console.log(fixedincome, Variableincome)
                        animateNumber(res,"income_total");
                        animateNumber(debt,"cal_mortage");
                        animateNumber(res - debt,"cal_mortage_big");
                      }

                      document.getElementById("btn_cal").addEventListener("click", ()=>{
                        event.preventDefault();
                        calculateMortgage();
                    })
                    document.getElementById("fixed_monthly_income").addEventListener("blur", ()=>{
                    })
                      function animateNumber(end, elementId) {
                        let counterElement = document.getElementById(elementId);
                        let currentNumber = 0;

                        let increment = Math.floor(end / 50);
                        let intervalId = setInterval(function () {
                        counterElement.textContent = "$" + currentNumber;

                        if (currentNumber >= end) {
                            clearInterval(intervalId); 
                        } else {
                            if(currentNumber + increment >= end){
                                currentNumber = end
                                currentNumber = Math.floor(currentNumber)
                            }else{
                                currentNumber += increment;
                            }
                        }
                        }, 1);
                    }
                    function removeZero(input) {
                        const value = input.value;

                        if (value.charAt(0) === '0') {
                            input.value = value.slice(1); // Remove the leading 0
                        } else {
                        }
                    }
                    
                    </script>
                    </body>
                    